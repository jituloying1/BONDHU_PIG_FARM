<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JP Pig Farm Management</title>
</head>
<body>
  <h2>JP Pig Farm - Save to Google Sheet</h2>

  <div>
    <h3>Add Pig</h3>
    <input id="pigName" placeholder="Name">
    <input id="pigWeight" placeholder="Weight">
    <input id="pigGender" placeholder="Gender">
    <input type="file" id="pigImage">
    <button onclick="savePig()">Save Pig</button>
  </div>

  <div>
    <h3>Add Sale</h3>
    <input id="salePig" placeholder="Pig">
    <input id="saleBuyer" placeholder="Buyer">
    <input id="salePrice" placeholder="Price">
    <select id="saleMode">
      <option value="Cash">Cash</option>
      <option value="UPI">UPI</option>
      <option value="Bank Transfer">Bank Transfer</option>
    </select>
    <button onclick="saveSale()">Save Sale</button>
  </div>

  <div>
    <h3>Add Expense</h3>
    <input id="expenseType" placeholder="Type">
    <input id="expenseAmount" placeholder="Amount">
    <button onclick="saveExpense()">Save Expense</button>
  </div>

  <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzmwplKfjuplj3p0IFqoohrwlCwH0K3WXNbdKbYZSE7luGAe1r8Qe_rzJNw5FMc__zr/exec'; // Replace with your deployed Apps Script URL

    function savePig() {
      const name = document.getElementById('pigName').value;
      const weight = document.getElementById('pigWeight').value;
      const gender = document.getElementById('pigGender').value;
      const imageInput = document.getElementById('pigImage').files[0];

      if (!name || !weight || !gender || !imageInput) {
        alert("Fill all pig fields"); return;
      }

      const reader = new FileReader();
      reader.onloadend = function () {
        const image = reader.result;
        fetch(scriptURL + '?sheet=Pigs', {
          method: 'POST',
          body: JSON.stringify({ name, weight, gender, image })
        })
        .then(res => res.text())
        .then(alert);
      };
      reader.readAsDataURL(imageInput);
    }

    function saveSale() {
      const pig = document.getElementById('salePig').value;
      const buyer = document.getElementById('saleBuyer').value;
      const price = document.getElementById('salePrice').value;
      const mode = document.getElementById('saleMode').value;
      if (!pig || !buyer || !price) return alert("Fill all sale fields");

      fetch(scriptURL + '?sheet=Sales', {
        method: 'POST',
        body: JSON.stringify({ pig, buyer, price, mode })
      })
      .then(res => res.text())
      .then(alert);
    }

    function saveExpense() {
      const type = document.getElementById('expenseType').value;
      const amount = document.getElementById('expenseAmount').value;
      if (!type || !amount) return alert("Fill all expense fields");

      fetch(scriptURL + '?sheet=Expenses', {
        method: 'POST',
        body: JSON.stringify({ type, amount })
      })
      .then(res => res.text())
      .then(alert);
    }
  </script>
</body>
</html>
